{% extends 'pms_app/base.html' %}

{% block content %}
<section class="payroll-list py-5">
    <div class="container">
        <h1 class="text-center mb-5">Payroll Records</h1>
        <div class="text-right mb-4">
            <a href="{% url 'payroll_create' %}" class="btn btn-primary"><i class="fas fa-plus"></i> Add Payroll</a>
            <a href="{% url 'generate_payroll' %}" class="btn btn-success ml-2"><i class="fas fa-cog"></i> Generate Payroll</a>
        </div>
        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <thead class="thead-dark">
                    <tr>
                        <th>Employee</th>
                        <th>Month</th>
                        <th>Year</th>
                        <th>Basic Salary</th>
                        <th>Deductions</th>
                        <th>Total Payable</th>
                        <th>Payment Date</th>
                        <th>Payment Method</th>
                    </tr>
                </thead>
                <tbody>
                    {% for payroll in payroll_records %}
                    <tr>
                        <td>{{ payroll.employee.name }}</td>
                        <td>{{ payroll.month }}</td>
                        <td>{{ payroll.year }}</td>
                        <td>{{ payroll.basic_salary }}</td>
                        <td>{{ payroll.deductions }}</td>
                        <td>{{ payroll.total_payable }}</td>
                        <td>{{ payroll.payment_date|default_if_none:"-" }}</td>
                        <td>{{ payroll.payment_method|default_if_none:"-" }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="8" class="text-center">No payroll records found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>
{% endblock %}